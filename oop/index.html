<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>factory</title>
</head>

<body>
    <script>
        // 工厂模式
        {
            function person(name, age, sex) {
                let p = new Object();
                p.name = name;
                p.age = age;
                p.sex = sex;
                p.sayName = function () {
                    console.log(this.name);
                }
                return p
            }
            let person1 = person('jack', 18, '男');
            let person2 = person("marry", 17, "女");
            console.log(person1, person2);
        };
        // 构造函数
        {
            function Person(name, age, sex) {
                this.name = name;
                this.age = age;
                this.sex = sex;
                this.sayName = () => {
                    console.log(this.name);
                }
                this.sayAge = sayAge;
            }

            function sayAge() {
                console.log(this.age);
            }
            let person1 = new Person('jack', 18, '男');
            person1.sayAge();
            let person2 = new Person("marry", 17, "女");
            person2.sayAge();
            console.log(person1, person2);
        };
        // 原型
        {
            // 理解原型
            {
                function Person() {};
                Person.prototype.name = 'jack';
                Person.prototype.sayName = function () {
                    console.log("hello jack");
                };
                let person1 = new Person();
                let person2 = new Person();
                person1.sayName();
                person2.sayName();
                console.log(Person.prototype.isPrototypeOf(person1));
                console.log(Person.prototype.isPrototypeOf(person2));
                // 实例化设置属性屏蔽了原型上的属性
                person1.name = 'marry';
                console.log(person1.name, person2.name);
            }
            // in操作符
            {
                // 单独使用
                function Person() {};
                Person.prototype.name = 'jack';
                Person.prototype.sayName = function () {
                    console.log("hello jack");
                };
                let person1 = new Person();
                let person2 = new Person();
                console.log("name" in person1,'name' in person2);
                person1.name = 'marry';
                console.log(person1.name);
                console.log("name" in person1,'name' in person2);
                // for-in
            }
            // 原型的简单写法
            {}
            // 原型的动态性
            {}
            // 原生对象的原型
            {}
            // 原型对象的问题
        };
        //组合使用构造函数模式和原型模式
        {
            function Person(name, age, sex) {
                this.name = name;
                this.age = age;
                this.sex = sex;
                this.friend = ['xiaoming', 'xiaohong'];
            }
            Person.prototype = {
                constructor: Person,
                sayName: function () {
                    console.log(this.name);
                }
            }
            let person1 = new Person('jack', 18, '男');
            let person2 = new Person('marry', 20, '女');
            person1.friend.push("van");
            console.log(person1.friend, person2.friend);
            console.log(person1.friend === person2.friend);
            console.log(person1.sayName === person2.sayName);
            person1.sayName();
            person2.sayName();
        }
    </script>
</body>

</html>